
# 智能博客 CMS AI 编辑器组件 (Smart Blog CMS AI Editor)

这是一个专为现代化博客系统打造的高级内容管理前端组件。它集成了 Markdown 编辑、实时预览、自动化图像处理流水线以及基于大语言模型（LLM）的智能辅助功能，旨在极大地简化技术博客的写作与发布流程。

## ✨ 核心特性

### 1. 📝 智能 Markdown 编辑器
*   **双模式切换**：支持纯文本编辑模式和所见即所得的实时预览模式。
*   **GFM 支持**：完整支持 GitHub Flavored Markdown 语法，包括表格、任务列表、删除线等。
*   **Dracula 主题**：深度定制的 CSS 样式，契合深色模式开发环境，提供沉浸式写作体验。卡片式引用块、高亮代码块和美化的表格样式。
*   **文件导入**：支持一键导入本地 `.md` 文件内容。

### 2. 🧠 多模型 AI 辅助分析
一键调用 AI 对文章内容进行深度理解和结构化提取。
*   **多模型支持**：
    *   **Google Gemini**: 原生集成最新的 `gemini-3-flash-preview`, `gemini-2.0-flash` 等模型。
    *   **OpenAI 兼容接口**: 支持接入 DeepSeek (R1/V3), 通义千问 (Qwen), 智谱 GLM, MiniMax 等国产大模型。
*   **智能提取内容**：
    *   自动生成吸引人的 **标题**。
    *   编写 SEO 友好的 **摘要 (Summary)**。
    *   提取关键 **标签 (Tags)**。
    *   生成 URL 友好的 **Slug**。
    *   预估文章 **阅读时长**。
*   **鲁棒性解析**：内置强大的 JSON 解析逻辑，能够处理包含 `<think>` 标签（如 DeepSeek R1）或 Markdown 代码块包裹的非标准 AI 响应。

### 3. 🖼️ 自动化媒体处理流水线
解决了 Markdown 写作中最繁琐的图片管理问题。
*   **本地资源映射**：当 Markdown 中包含本地路径图片（如 `./assets/img.png`）时，系统会自动提示上传对应文件夹。
*   **前端压缩**：在上传前自动在浏览器端进行图片压缩（支持调整质量、最大宽度及转换为 WebP 格式），节省带宽与存储成本。
*   **对象存储直传**：
    *   **Aliyun OSS**: 支持阿里云对象存储，包含前端签名计算。
    *   **MinIO**: 支持自建 S3 兼容存储 (MinIO)。
*   **链接自动替换**：上传成功后，自动将 Markdown 中的本地路径替换为远程 OSS 链接。

### 4. 🗃️ 元数据与封面管理
*   **封面图上传**：提供拖拽或点击上传区域，支持实时预览，并在预览模式下置顶显示。
*   **Payload 预览**：实时展示即将同步到数据库的 JSON 数据结构，方便调试与后端对接。
*   **交互式标签管理**：支持动态添加、删除文章标签。

## 🛠️ 技术栈

*   **框架**: React 19 + TypeScript
*   **样式**: Tailwind CSS + 自定义 CSS (Inter 字体)
*   **Markdown 渲染**: `react-markdown` + `remark-gfm`
*   **AI SDK**: `@google/genai` (官方 SDK)
*   **图标库**: Heroicons (SVG)

## 🚀 使用流程

1.  **配置设置**: 点击右上角设置图标，配置 AI 提供商（API Key）和 对象存储（OSS/MinIO）参数。
2.  **撰写/导入**: 在左侧编辑器撰写文章，或导入现有的 Markdown 文件。
3.  **保存与上传**:
    *   点击 "保存并上传"。
    *   系统自动检测图片 -> 压缩 -> 上传 OSS -> 替换链接 -> 模拟保存到数据库。
4.  **AI 分析**:
    *   点击 "一键 AI 分析"。
    *   AI 读取当前内容，自动填充右侧的元数据区域（标题、摘要、Slug 等）。
5.  **完善信息**: 上传封面图，微调标签或摘要。
6.  **发布**: 最终确认 Payload 数据无误，即可推送到 CMS 后端（演示中为模拟）。

## 📂 目录结构

*   `App.tsx`: 主应用组件，包含 UI 布局、状态管理和核心逻辑。
*   `types.ts`: TypeScript 类型定义（配置、AI 响应、OSS 接口等）。
*   `services/geminiService.ts`: 封装 AI 调用逻辑，包含 Gemini 和 OpenAI 兼容层的实现及 JSON 清洗策略。
*   `services/imageService.ts`: 处理图片正则匹配、压缩算法、OSS 签名计算及上传逻辑。
*   `config/presets.ts`: 预置的 AI 模型参数和 OSS 配置模板。

## ⚠️ 注意事项

*   **安全性**: 当前演示应用在前端直接存储 API Key 和 OSS Secret Key。在生产环境中，建议通过后端代理获取临时凭证（如 STS Token）来进行 OSS 上传，以避免密钥泄露。
*   **跨域 (CORS)**: 使用 Aliyun OSS 或 MinIO 直传时，需确保存储桶已配置允许当前域名的 CORS 规则 (PUT 方法)。
