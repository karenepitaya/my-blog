---
import type { PublicArticleAuthor } from '~/lib/publicApi'

interface Props {
  author: PublicArticleAuthor | null
}

const { author } = Astro.props
const displayName = author?.username?.trim() || 'Unknown author'
const avatarUrl = author?.avatarUrl ?? null
const bio = author?.bio?.trim()
const initial = displayName.slice(0, 1).toUpperCase()
---

<aside
  class="flex flex-col sm:flex-row items-center justify-around sm:gap-6 max-w-full mb-6 py-8 bg-accent/8 p-5 rounded-xl border-2 border-accent/15"
>
  {
    avatarUrl ? (
      <img
        src={avatarUrl}
        alt={displayName}
        loading="lazy"
        class="rounded-full border-4 border-accent/15 size-20 shrink-0 bg-foreground/5 object-cover"
      />
    ) : (
      <div class="rounded-full border-4 border-accent/15 size-20 shrink-0 bg-foreground/5 flex items-center justify-center text-foreground/60 font-semibold">
        {initial}
      </div>
    )
  }
  <div class="flex flex-col gap-3 sm:gap-2 text-center sm:text-left">
    <div class="flex flex-wrap items-center justify-center sm:justify-start gap-2">
      <span class="text-[0.7rem] uppercase tracking-[0.25em] text-accent/70">
        Author Card - Lite
      </span>
    </div>
    <h2 class="text-heading1 text-xl font-semibold">{displayName}</h2>
    <p class="text-foreground/80 text-sm sm:text-base max-w-xl">
      {bio || 'Author profiles are being customized. A richer card will land here soon.'}
    </p>
    <div class="flex flex-wrap items-center justify-center sm:justify-start gap-2 text-xs text-foreground/70">
      <span class="rounded-full border-1 border-accent/20 bg-accent/10 px-3 py-1">
        Profile page coming soon
      </span>
      <span class="rounded-full border-1 border-accent/20 bg-accent/10 px-3 py-1">
        Multi-author upgrade in progress
      </span>
    </div>
  </div>
</aside>
